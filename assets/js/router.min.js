import domlib from"/js/domlib.min.js";const router=domlib.emitter();router.mode=app.routerMode||window.history.pushState?"history":"hash",window.addEventListener("popstate",r=>router.check()),window.addEventListener("hashchange",router.check),router.root="/",router.clearSlashes=r=>r.toString().replace(/\/$/,"").replace(/^\//,""),router.getFragment=()=>{let r="";if("history"===router.mode)r=router.clearSlashes(decodeURI(window.location.pathname+window.location.search)),r=r.replace(/\?(.*)$/,""),r="/"!==router.root?r.replace(router.root,""):r;else{const e=window.location.href.match(/#(.*)$/);r=e?e[1]:""}return router.clearSlashes(r)},router.navigate=(r="")=>("history"===router.mode?window.history.pushState(null,null,router.root+router.clearSlashes(r)):window.location.href=`${window.location.href.replace(/#(.*)$/,"")}#${r}`,router.check(),router),router.check=()=>{router.current!==router.getFragment()&&(router.current=router.getFragment(),console.log(router.current),router.emit(router.current))};export default router;
//# sourceMappingURL=router.min.js.map