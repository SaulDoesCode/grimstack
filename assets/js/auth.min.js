{const e=domlib,a=domlib.domfn,t=e.query(".auth-launcher"),{authView:n,usernameInput:o,passwordInput:s}=e.h`
<section class="auth-view" ref="authView">
  <div>
    <div class="auth-form-field">
      <label for="auth-username">Username</label>
      <input type="text" name="username" id="auth-username" ref="usernameInput">
      <label for="auth-pwd">Password</label>
      <input type="password" name="password" id="auth-pwd" ref="passwordInput">
    </div>
    <button class="submit" onclick="() => app.authenticate()">authenticate</button>
  </div>
</section>`.collect();app.authView=n,app.authViewToggle=(o=!a.hasClass(n,"open"))=>(a.class(n,"open",o),a.class(t,"active",o),o?(e.render(n),r.on()):a.remove(n),o);const r=e.on.click(document.body,e=>{e.target!=n&&!n.contains(e.target)&&a.hasClass(n,"open")&&e.target!=t&&(e.preventDefault(),app.authViewToggle(!1),r.off())}).off();e.on.click(t,app.clickAuthLauncher=e=>{e.preventDefault(),app.authViewToggle()}),app.authenticate=(e=o.value.trim(),a=s.value.trim())=>{if(""==e)throw new Error("username is invalid");if(""==a)throw new Error("password is invalid");app.jsonPost("/auth",{username:e,password:a}).then(e=>e.json()).then(e=>{console.log(e),e.ok&&location.reload()})}}