import app from"/js/site.min.js";const d=app.d,df=d.domfn,authLauncher=d.query(".auth-launcher"),{authView:authView,usernameInput:usernameInput,passwordInput:passwordInput,authBtn:authBtn}=d.h`
<section class="auth-view" ref="authView">
  <div>
    <div class="auth-form-field">
      <label for="auth-username">Username</label>
      <input type="text" name="username" id="auth-username" ref="usernameInput">
      <label for="auth-pwd">Password</label>
      <input type="password" name="password" id="auth-pwd" ref="passwordInput">
    </div>
    <button class="submit" ref="authBtn">authenticate</button>
  </div>
</section>`.collect();app.authViewToggle=app.setupToggleSituation(authLauncher,app.authView=authView),app.authenticate=async(a=usernameInput.value.trim(),t=passwordInput.value.trim())=>{if(""==a)throw new Error("username is invalid");if(""==t)throw new Error("password is invalid");console.log("attempting authentication");const e=await app.jsonPost("/auth",{username:a,password:t}),n=await e.json();console.log(n),n.ok&&location.reload()};const authClickHandle=d.once.click(authBtn,async a=>{try{await app.authenticate()}catch(a){console.error(a),authClickHandle.on()}});app.authViewToggle.toggleView();