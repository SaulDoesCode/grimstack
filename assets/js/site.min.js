import domlib from"/js/domlib.min.js";const app=domlib.emitter(),d=app.d=domlib,df=domlib.domfn,jsonHTTPMethod=e=>(o,t)=>fetch(o,{method:e,headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});app.jsonPost=jsonHTTPMethod("POST"),app.jsonPut=jsonHTTPMethod("PUT"),app.writQuery=async(e={})=>{isNaN(e.page)&&(e.page=1),e.kind||(e.kind="post");const o=await app.jsonPost("/writs",e);return await o.json()},app.editableWritQuery=async(e={})=>{isNaN(e.page)&&(e.page=1),e.kind||(e.kind="post");const o=await app.jsonPost("/editable-writs",e);return await o.json()},app.setupToggleSituation=(e,o,t="body")=>{const n={};return n.clickOutHandler=d.on.pointerdown(document.body,t=>{t.target!=o&&!o.contains(t.target)&&df.hasClass(o,"open")&&t.target!=e&&(t.preventDefault(),n.toggleView(!1),n.clickOutHandler.off())}).off(),n.launchEventHandler=d.on.pointerdown(e,e=>{e.preventDefault(),n.toggleView()}),n.toggleView=(a=!df.hasClass(o,"open"))=>{df.class(o,"open",a),df.class(e,"active",a),a?(d.render(o,t),n.clickOutHandler.on()):df.remove(o)},n.on=!0,n.toggle=(e=!n.on)=>(n.toggleView(e),e||(n.launchEventHandler.off(),n.clickOutHandler.off(),df.remove(o)),n.on=e),n},window.app=app;export default app;