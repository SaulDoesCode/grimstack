import domlib from"/js/domlib.min.js";const app=domlib.emitter(),d=app.d=domlib,df=domlib.domfn,jsonHTTPMethod=t=>(e,a)=>fetch(e,{method:t,headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});app.jsonPost=jsonHTTPMethod("POST"),app.jsonPut=jsonHTTPMethod("PUT"),app.writQuery=async(t={})=>{isNaN(t.page)&&(t.page=1),t.kind||(t.kind="post");const e=await app.jsonPost("/writs",t);return await e.json()},app.editableWritQuery=async(t={})=>{isNaN(t.page)&&(t.page=1),t.kind||(t.kind="post");const e=await app.jsonPost("/editable-writs",t);return await e.json()},app.toggleSituations={list:[],active:null},app.setupToggleSituation=(t,e,a="body",{viewOutAnimation:o,delayRemoveMS:n}={})=>{const i={};return i.clickOutHandler=d.on.pointerdown(document.body,a=>{a.target!=e&&!e.contains(a.target)&&df.hasClass(e,"open")&&a.target!=t&&(a.preventDefault(),i.toggleView(!1),i.clickOutHandler.off())}).off(),i.launchEventHandler=d.on.pointerdown(t,t=>{t.preventDefault(),i.toggleView()}),i.toggleView=(p=!df.hasClass(e,"open"))=>{df.class(e,"open",p),df.class(t,"active",p),p?(d.render(e,a),i.clickOutHandler.on(),app.toggleSituations.active&&app.toggleSituations.active.toggleView(!1),app.toggleSituations.active=i):(app.toggleSituations.active==i&&(app.toggleSituations.active=null),null!=n?(e.style.animation=o,i.launchEventHandler.off(),setTimeout(()=>{df.remove(e),e.style.animation="",i.launchEventHandler.on()},n)):df.remove(e))},app.toggleSituations.list.push(i),i},window.app=app;export default app;